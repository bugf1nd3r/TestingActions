 
name: Testing 

env:
 TARGET: https://bugcrowd.com 
 
on: push

jobs:
 download_others_repo:
  name: OpenRedireX - Asynchronous Open redirect Fuzzer for Humans
  
  runs-on: [ubuntu-latest]
  strategy:
   matrix:
    python-version: [3.7]
  steps:
   - name: Set up Python ${{ matrix.python-version }}
     uses: actions/setup-python@v1
     with:
        python-version: ${{ matrix.python-version }}
   - name : checking git version
     run : |
      git --version  
   - name : installing dependencies - aiohttp
     run : |
      pip3 install aiohttp
   - name: Downloading from https://github.com/devanshbatham/OpenRedireX
     id: step1
     run: |
      git clone https://github.com/devanshbatham/OpenRedireX
      cd OpenRedireX
      python3 -m venv env
      source env/bin/activate
      python3.7 openredirex.py -u "${{ env.TARGET }}"/?url=FUZZ -p payloads.txt --keyword FUZZ
   #- name : checking output of step1
   #  run : ${{steps.step1.outputs}}
   - name: oction-create-issue
     uses: maxkomarychev/oction-create-issue@v0.7.1
     with:
       # Token to authenticate the request

       token: ${{ secrets.GITHUB_TOKEN }}
       # owner parameter

       owner: bugf1nd3r
       # repo parameter

       repo: master
       # The title of the issue.

       title: results of ${{ env.TARGET }}
       # The contents of the issue.

       body: Testing
       # Login for the user that this issue should be assigned to. _NOTE: Only users with push access can set the assignee for new issues. The assignee is silently dropped otherwise. **This field is deprecated.**_

       assignee: bugf1nd3r
       # The `number` of the milestone to associate this issue with. _NOTE: Only users with push access can set the milestone for new issues. The milestone is silently dropped otherwise._

       #milestone: # optional
       # Labels to associate with this issue. _NOTE: Only users with push access can set labels for new issues. Labels are silently dropped otherwise._

       #labels: # optional
       # Logins for Users to assign to this issue. _NOTE: Only users with push access can set assignees for new issues. Assignees are silently dropped otherwise._

       #assignees: # optional
  

  # security:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Test for public javascript library vulnerabilities 
  #       uses: lirantal/is-website-vulnerable@master
  #       with:
  #         scan-url: ${{ env.TARGET }}
  # zap_scan:
  #   runs-on: ubuntu-latest
  #   name: Scan the webapplication
  #   steps:
  #     - name: Checkout
  #       uses: actions/checkout@v2
  #       with:
  #         ref: master
  #     - name: ZAP Scan
  #       uses: zaproxy/action-baseline@v0.2.0
  #       with:
  #         token: ${{ secrets.GITHUB_TOKEN }}
  #         docker_name: 'owasp/zap2docker-stable'
  #         target: ${{ env.TARGET }}
  #         rules_file_name: '.zap/rules.tsv'
  #         cmd_options: '-a'
